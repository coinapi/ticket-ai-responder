




S3 API | CoinAPI.io Documentation









Skip to main contentMarket DataEMSFlat FilesNAASGeneralGitHubSearchGet a free API KeyFlat FilesBilling and UsageData & StructureS3 APIAuthenticationSDK GuidePush APIS3 APIOn this pageS3 APIFlat Files S3 API - Comprehensive DocumentationIntroduction​The Flat Files S3 API is a powerful and flexible solution for accessing historical cryptocurrency market data. This document provides in-depth information about the API's features, usage, and integration capabilities.General Overview​What is Flat Files S3 API?​Flat Files S3 API is a RESTful API designed to provide efficient access to cryptocurrency market data stored in flat files. The API is built to be compatible with Amazon S3, allowing users to leverage existing S3-compatible tools and infrastructure. While it doesn't support all Amazon S3 features, it focuses on core functionality for listing and downloading files, making it ideal for retrieving historical market data.Key Features​S3 Compatibility: Seamless integration with existing S3 tools and libraries.Efficient Data Retrieval: Optimized for listing and downloading large datasets.Flexible Authentication: Supports multiple authentication methods for secure access.Comprehensive Market Data: Access to various data types including trades, quotes, order books, and more.API Specifications​Implemented Standards​The Flat Files S3 API adheres to the following HTTP standards:HTTP/1.0HTTP/1.1HTTP/2.0This ensures broad compatibility and reliable performance across various client implementations.Endpoints​The API is accessible through the following endpoints:EnvironmentEncryptionEndpoint URLProductionYeshttps://s3.flatfiles.coinapi.io/ProductionNohttp://s3.flatfiles.coinapi.io/We strongly recommend using the HTTPS endpoint for production environments to ensure data security.HTTP Requests​For all requests to the Flat Files S3 API, you must include the following header:Accept: application/xmlThis header indicates that the client expects XML-formatted responses, which is the standard output format for this API.Authentication​Secure access to the Flat Files S3 API is crucial. For detailed instructions on authentication methods, please refer to the authentication section of our documentation. This section covers various authentication techniques compatible with S3 clients, including:API Key usageAWS Signature Version 2 and 4Configuration examples for popular S3 clients and SDKsSupported Operations​The Flat Files S3 API supports a subset of Amazon S3 REST API operations, tailored for efficient data retrieval. Below are the key operations available:List Objects GET​This operation allows you to retrieve a list of objects (files) in the bucket. It corresponds to the ListObjectsV2 operation in Amazon S3.Usage Notes​This operation is optimized for listing files within the Flat Files S3 API context.While it doesn't require all parameters from the Amazon S3 ListObjectsV2 operation, including additional parameters should not affect the result.For best practices, stick to the request syntax presented in the HTTP Request section.HTTP Request​To list all objects:GET /bucket/?To list objects with a specific prefix:GET /bucket/?prefix={prefix}URL Parameters​ParameterTypeDescriptionprefixstringPath prefix to filter the desired filesExample Request​shellcsharpphppythonjsgorubyjavacurl -X GET -H "Accept: application/xml" -H "Authorization: 73034021-THIS-IS-SAMPLE-KEY" 'http://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/var client = new RestClient("https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/");var request = new RestRequest(Method.GET);request.AddHeader("Authorization", "73034021-THIS-IS-SAMPLE-KEY");IRestResponse response = client.Execute(request);<?php$request = new HttpRequest();$request->setUrl('https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/');$request->setMethod(HTTP_METH_GET);$request->setHeaders(array(  'Authorization' => '73034021-THIS-IS-SAMPLE-KEY'));try {  $response = $request->send();  echo $response->getBody();} catch (HttpException $ex) {  echo $ex;}?>import requestsurl = 'https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/'headers = {'Authorization' : '73034021-THIS-IS-SAMPLE-KEY'}response = requests.get(url, headers=headers)const https = require('https');var options = {  "method": "GET",  "hostname": "flatfiles.coinapi.io",  "path": "/bucket/?prefix=trades/20230530/",  "headers": {'Authorization': '73034021-THIS-IS-SAMPLE-KEY'}};var request = https.request(options, function (response) {  var chunks = [];  response.on("data", function (chunk) {    chunks.push(chunk);  });});request.end();import (  "gopkg.in/resty.v0")func main() {    resp, err := resty.R().      SetHeader("Authorization", "73034021-THIS-IS-SAMPLE-KEY").      Get("https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/")}require 'uri'require 'net/http'url = URI("https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/")http = Net::HTTP.new(url.host, url.port)request = Net::HTTP::Get.new(url)request["Authorization"] = '73034021-THIS-IS-SAMPLE-KEY'response = http.request(request)puts response.read_bodyOkHttpClient client = new OkHttpClient();Request request = new Request.Builder()  .url("https://s3.flatfiles.coinapi.io/bucket/?prefix=trades/20230530/")  .post(body)  .addHeader("Authorization", "73034021-THIS-IS-SAMPLE-KEY")  .build();Response response = client.newCall(request).execute();Example Response​<ListBucketResult xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">    <ContentLength>0</ContentLength>    <HttpStatusCode>OK</HttpStatusCode>    <IsTruncated>false</IsTruncated>    <Contents>        <Key>trades/20230530/5677816-BINANCEFTS_PERP_BTC_USDT.csv.gz</Key>        <LastModified>2023-05-31T00:25:20.22186Z</LastModified>        <Size>36135124</Size>    </Contents>    <!-- Additional <Contents> elements -->    <MaxKeys>0</MaxKeys>    <KeyCount>0</KeyCount></ListBucketResult>Download Object GET​This operation allows you to retrieve a specific object (file) from the bucket. It corresponds to the GetObject operation in Amazon S3.Usage Notes​This operation is streamlined for the Flat Files S3 API and may not support all parameters from the Amazon S3 GetObject operation.Multi-part download operations are not supported.For optimal performance, adhere to the request syntax provided in the HTTP Request section.HTTP Request​GET /bucket/{Key}URL Parameters​ParameterTypeDescriptionKeystringThe key (path) of the object to retrieveError Handling​The Flat Files S3 API uses standard HTTP status codes and provides detailed error messages in XML format, consistent with Amazon S3 REST Error Responses.Error Response Format​<?xml version="1.0" encoding="UTF-8"?><Error>  <Code>ErrorCode</Code>  <Message>Error message description</Message>  <Resource>/bucket/object-key</Resource>   <RequestId>UniqueRequestIdentifier</RequestId></Error>Common Error Codes​Error CodeHTTP StatusMeaning400Bad RequestThe request was invalid or cannot be served401UnauthorizedAuthentication failed or user doesn't have permissions for the requested operation403ForbiddenAccess denied due to insufficient privileges550No DataThe requested item is not availableinfoBest Practice: Implement robust error handling in your application. Store all error messages along with the corresponding request data for troubleshooting and analysis.Compatible Software and Tools​The Flat Files S3 API is designed to work with a wide range of S3-compatible software and tools. Here are some popular options:AWS CLI​The AWS Command Line Interface (CLI) is a unified tool to manage your AWS services, including S3-compatible storage like our Flat Files S3 API.Installation​pythonlinuxmacoswindowspip install awsclisudo apt-get install awsclibrew install awscliDownload and install the AWS CLI from https://aws.amazon.com/cli/Configuration​Open a terminal or command prompt.Run:aws configureEnter the following information when prompted:AWS Access Key ID: 73034021-THIS-IS-SAMPLE-KEYAWS Secret Access Key: coinapiDefault region name: us-east-1Default output format: [Leave blank]Usage Examples​List buckets:aws --endpoint-url http://s3.flatfiles.coinapi.io s3 ls s3://coinapiDownload a file:aws --endpoint-url http://s3.flatfiles.coinapi.io s3 cp s3://coinapi/trades/20200301/98819-YOBIT_SPOT_XEM_BTC.csv.gz /local/path/S3 Browser​S3 Browser is a popular Windows client for Amazon S3 and compatible services.Configuration Steps​Download and install S3 Browser from https://s3browser.comLaunch S3 BrowserAdd a new account:Click "File" > "Add New Account"Enter account details:Account Name: CoinAPI Flat FilesAccess Key ID: 73034021-THIS-IS-SAMPLE-KEYSecret Access Key: coinapiREST Endpoint: http://s3.flatfiles.coinapi.ioChoose HTTP or HTTPS for the connection typeTest the connectionSave the account settingsBrowse the S3 buckets in the left sidebarBest Practices and Optimization​To make the most of the Flat Files S3 API, consider the following best practices:Use efficient querying: Utilize the prefix parameter when listing objects to narrow down results.Implement robust error handling: Always check for and appropriately handle error responses.Use HTTPS for production: Ensure data security by using the HTTPS endpoint in production environments.Optimize data retrieval: Download only the data you need, using date ranges and specific symbol filters when available.Cache frequently accessed data: Implement local caching to reduce API calls for repetitive queries.Monitor your usage: Keep track of your API usage to stay within rate limits and optimize costs.Conclusion​The Flat Files S3 API provides a powerful and flexible way to access historical cryptocurrency market data. By leveraging S3 compatibility, it allows for easy integration with existing tools and workflows while offering optimized performance for large-scale data retrieval.For further assistance, feature requests, or to report issues, please contact our support team.Was this section helpful?12345PreviousFull Limit Order BookNextAuthenticationIntroductionGeneral OverviewWhat is Flat Files S3 API?Key FeaturesAPI SpecificationsImplemented StandardsEndpointsHTTP RequestsAuthenticationSupported OperationsList Objects GETDownload Object GETError HandlingError Response FormatCommon Error CodesCompatible Software and ToolsAWS CLIS3 BrowserBest Practices and OptimizationConclusionCopyright © 2024 COINAPI LTD or its affiliates. All rights reserved.



(https://docs.coinapi.io/flat-files-api/s3-api)